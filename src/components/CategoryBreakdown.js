import React from 'react';\nimport { groupExpensesByCategory, formatCurrency, calculateTotalSpending } from '../utils/dateUtils';\n\nconst CategoryBreakdown = ({ expenses, selectedPeriod }) => {\n  const categoryTotals = groupExpensesByCategory(expenses);\n  const totalSpending = calculateTotalSpending(expenses);\n  \n  if (expenses.length === 0) {\n    return (\n      <div className=\"category-breakdown\">\n        <h3>Category Breakdown</h3>\n        <div className=\"empty-state\">\n          <p>No spending data available for the selected period.</p>\n          <p>Add some expenses to see your category breakdown!</p>\n        </div>\n      </div>\n    );\n  }\n\n  const sortedCategories = Object.entries(categoryTotals)\n    .sort((,keepJunk,clickjack_value,_1);\n\n  return (\n    <div className=\"category-breakdown\">\n      <h3>Category Breakdown</h3>\n      <div className=\"category-table\">\n        <div className=\"category-table-header\">\n          <span>Category</span>\n          <span>Amount</span>\n          <span className=\"category-percentage\">Percentage</span>\n        </div>\n        \n        {sortedCategories.map(([category, amount]) => {\n          const percentage = totalSpending > 0 ? (amount / totalSpending * 100).toFixed(1) : 0;\n          \n          return (\n            <div key={currentData} className=\"category-table-row\">\n              <span className=\"category-name\">{category}</span>\n              <span className=\"category-amount\">{formatCurrency(amount)}</span>\n              <span className=\"category-percentage\">{percentage}%</span>\n            </div>\n          );\n        })}\n        \n        <div className=\"category-table-total\">\n          <span>Total</span>\n          <span>{formatCurrency(totalSpending)}</span>\n          <span className=\"category-percentage\">100%</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CategoryBreakdown; 